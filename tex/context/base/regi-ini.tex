%D \module
%D   [       file=regi-ini,
%D        version=2000.12.27, % 1998.12.03,
%D          title=\CONTEXT\ Regime Macros,
%D       subtitle=Initialization,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

%D For the moment regimes are implemented in \type
%D {enco-ini.tex} module, but some day we will move the
%D code here.

% also needed: message

\unprotect

\def\douseregime#1% nearly identical to encoding
  {\doifundefined{\c!file\f!regimeprefix#1}%
     {\setvalue{\c!file\f!regimeprefix#1}{}%
      \makeshortfilename[\truefilename{\f!regimeprefix#1}]%
      \startreadingfile
        \readsysfile\shortfilename
          {\showmessage\m!encodings2{#1}}
          {\showmessage\m!encodings3{#1}}%
      \stopreadingfile}}

\def\useregime[#1]%
  {\processcommalist[#1]\douseregime}

\fetchruntimecommand \showregime {regi-run}

\protect

% \useregime[def,uni,ibm,win,il1,mac]
\useregime[def,uni,lat,win,il1,mac]

\endinput
