%D \module
%D   [       file=core-var,
%D        version=1998.02.21,
%D          title=\CONTEXT\ Core Macros,
%D       subtitle=Variables,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for 
%C details. 

\writestatus{loading}{Context Core Macros / Variables}

\unprotect

%D \macros 
%D   {every...}
%D
%D A few every's. 

\newevery \everyshipout       \relax
\newevery \everybeforeshipout \relax
\newevery \everyaftershipout  \relax
\newevery \everylastshipout   \relax
\newevery \everybye           \relax   
\newevery \everygoodbye       \relax   
\newevery \everystarttext     \relax
\newevery \everystoptext      \relax
\newevery \everypagebody      \relax
\newevery \everyforgetall     \relax

%D \macros
%D   {ifproductionrun}
%D
%D This boolean can be used to bypass certain 
%D initializations. 

\newif\ifproductionrun 

\appendtoks \productionruntrue \to \everydump

%D \macros 
%D   {fastmode}
%D
%D The command \type {\fastmode} disables some time consuming 
%D typesetting. 

\newevery \everyfastmode \relax

\newif\iffastmode 

\def\fastmode%
  {\fastmodetrue 
   \the\everyfastmode}

\def\silentmode% ook hier \everysilentmode net als \fastmode
  {\showmessagesfalse
   \showwarningsfalse
   \let\writestatus\gobbletwoarguments}

%D \macros 
%D   {pdfoutput}
%D
%D There are some fundamental differences between producing
%D \DVI\ and \PDF\ output, especially when we use \PDFTEX, like
%D object reuse, one pass graphic inclusion and the lack of a
%D postprocessing stage. Because we must make sure that
%D \CONTEXT\ knows what it's up to, we always default to \DVI\
%D mode, even when users explicitly ask for \PDF\ output in the
%D \PDFTEX\ configuration file. 

\ifx\pdfoutput\undefined \else

  \prependtoks \pdfoutput=0 \to \everyjob 

\fi

\protect 

\endinput
