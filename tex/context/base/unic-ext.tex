%D \module
%D   [       file=unic-ini,
%D        version=2006.13.01,
%D          title=\CONTEXT\ \UNICODE\ Support,
%D       subtitle=\UNICODE\ \& UTF-8 extras,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\writestatus{loading}{Context UNICODE Macros (ext)}

\beginTEX \expandafter \endinput \endTEX

\unprotect

%D Here we hook in a lookahead mechanism. This is needed for
%D Chinese. In future versions of \PDFTEX\ we need a real
%D lookahead mechanism.

\let\normalunicodechar\unicodechar

\newcount\unicodecharnumber

\def\unicodechar#1%
  {\unicodecharnumber#1%
   \futurelet\nextglyph\dounicodechar}

\def\dounicodechar
  {\normalunicodechar\unicodecharnumber}

\protect \endinput
