% NOT YET DOCUMENTED !!
 
%D \module
%D   [       file=core-fil,
%D        version=1997.09.10,
%D          title=\CONTEXT\ Core Macros,
%D       subtitle=File Support,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. Non||commercial use is
%C granted.

\writestatus{loading}{Context Core Macros / File Support}

\unprotect

% Why does all tex's handle 8+3 different.

\def\makeshortmodulename[#1#2#3#4#5#6#7#8#9]%
  {\def\modulename{#1#2#3#4#5#6#7#8.}%
   \expandafter\beforesplitstring\modulename\at.\to\modulename}

\def\dodousemodules#1%
  {\makeshortmodulename[m-#1........]%
   \doifundefinedelse{\modulename\v!aan}
     {\setgvalue{\modulename\v!aan}{}%
      \readsysfile{\modulename}%
        {\showmessage{\m!systems}{5}{#1}}%
        {\showmessage{\m!systems}{6}{#1}}}
     {\showmessage{\m!systems}{7}{#1}}}

\def\dousemodules[#1]%
  {\doifsomething{#1}
     {\processcommalist[#1]\dodousemodules}}

\def\usemodules%
  {\dosingleargument\dousemodules}

\def\usemodule%
  {\usemodules}

\protect

\endinput
