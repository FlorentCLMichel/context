%D \module
%D   [      file=x-xml-01,
%D        version=2001.10.10,
%D          title=\CONTEXT\ XML Style File,
%D       subtitle=Formatting X?? files,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

% texexec --use=xml-format yourfile.x** [--mode=packed,wide]
%
% pdftotext yourfile.pdf yournewfile.x**

\doifnothing  {\inputfilename}    {\end}
\doiffileelse {\inputfilename} {} {\end}

% The following makes pdftotext too slow:
%
% \definepapersize
%   [mine]
%   [height=.99\maxdimen,
%    width=200cm]
%
% \setuppapersize
%   [mine]
%   [mine]
%
% \setupbodyfont
%   [0.4pt,tt]
%
% this is faster
%
% \setuppapersize
%   [A0][A0]
%
% but normal A4 combined with 1 pt font size is the best
%
% An alternative is to use a small size, but this leads to
% too many messages
%
% \setupbodyfont
%   [1pt,tt]
%
% so we stick to a more normal alternive.

\unprotect

% \setuplayout
%   [backspace=0cm,
%    topspace=0cm,
%   %width=40em,
%    width=middle,
%    height=middle,
%    header=0cm,
%    footer=0cm]

\setuplayout
  [\c!rugwit=0cm,
   \c!kopwit=0cm,
  %\c!breedte=40em,
   \c!breedte=\v!midden,
   \c!hoogte=\v!midden,
   \c!hoofd=0cm,
   \c!voet=0cm]

% \setupbodyfont  [tt,10pt]
% \setuptolerance [verytolerant]
% \setupalign     [broad,right]
% \setupXMLfile   [level=2]


\setupbodyfont  [tt,10pt]
\setuptolerance [\v!zeersoepel]
\setupalign     [\v!ruim,\v!rechts]
\setupXMLfile   [\c!niveau=2]

\startmode[wide]

% \setuplayout [width=250cm]
  \setuplayout [\c!breedte=250cm]

\stopmode

\startmode[packed]

% \setupXMLfile [inbetween=]
  \setupXMLfile [\c!tussen=]

\stopmode

\protect

% The main text:

\def\XMLbannerprocessor#1{\string<\string ?xml #1\string ?\string>\endgraf}

\defineXMLprocessor [xml] {\XMLbannerprocessor}

\starttext

  \dontcomplain \showXMLfile{\inputfilename}

\stoptext
